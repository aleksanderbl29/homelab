storage:
  type: postgres
  path: "postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_IP}:5432/${POSTGRES_DB}?sslmode=disable"

alerting:
  github:
    repository_url: "https://github.com/aleksanderbl29/homelab"
    token: "${GITHUB_TOKEN}"
    failure-threshold: 10
    success-threshold: 5
    send-on-resolved: true
  matrix:
    access-token: ${MATRIX_ACCESS_TOKEN}
    internal-room-id: ${MATRIX_INTERNAL_ROOM_ID}

endpoints:
  - name: back-end
    group: core
    url: "https://example.org/"
    interval: 5m
    conditions:
      - "[STATUS] == 200"
      - "[CERTIFICATE_EXPIRATION] > 48h"

  - name: monitoring
    group: internal
    url: "https://example.org/"
    interval: 5m
    conditions:
      - "[STATUS] == 200"

  - name: nas
    group: internal
    url: "https://example.org/"
    interval: 5m
    conditions:
      - "[STATUS] == 200"

  - name: example-dns-query
    url: "8.8.8.8" # Address of the DNS server to use
    interval: 10s
    dns:
      query-name: "example.com"
      query-type: "A"
    conditions:
      - "[BODY] == 93.184.215.13"
      - "[DNS_RCODE] == NOERROR"
    alerts:
      - type: github
      - type: matrix

  - name: icmp-ping
    url: "icmp://192.168.20.20"
    interval: 10s
    conditions:
      - "[CONNECTED] == true"
    alerts:
      - type: github
      - type: matrix